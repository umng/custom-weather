<div class="homeBody">
  <!--div>
    <button mat-raised-button routerLink="/manage-data">Manage Data</button>
  </div-->
  <h1>rnsnforecast.com</h1>

  <mat-spinner *ngIf="isLoading" style="margin: 0 auto; margin-bottom: 12px;" [diameter]=40></mat-spinner>

  <mat-card style="width: 80%;max-width: 860px; margin: 0 auto; margin-bottom: 8px;">
    <mat-form-field class="inputSelect">
      <mat-select class="newFont" placeholder="Country" [(ngModel)]="selectedCountry" (selectionChange)="loadRecords('State')">
        <mat-option class="newFont">None</mat-option>
        <mat-option class="newFont" *ngFor="let country of countries" [value]="country.value">{{country.viewValue}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="inputSelect">
      <mat-select class="newFont" placeholder="State" [(ngModel)]="selectedState" (selectionChange)="loadRecords('District')" [disabled]="!selectedCountry">
        <mat-option class="newFont">None</mat-option>
        <mat-option class="newFont" *ngFor="let state of states" [value]="state.value">{{state.viewValue}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="inputSelect">
      <mat-select class="newFont" placeholder="District" [(ngModel)]="selectedDistrict" (selectionChange)="loadRecords('Block')" [disabled]="!selectedCountry || !selectedState">
        <mat-option class="newFont">None</mat-option>
        <mat-option class="newFont" *ngFor="let district of districts" [value]="district.value">{{district.viewValue}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="inputSelect">
      <mat-select class="newFont" placeholder="Block" [(ngModel)]="selectedBlock" (selectionChange)="loadRecords('Panchayat')" [disabled]="!selectedCountry || !selectedState || !selectedDistrict">
        <mat-option class="newFont">None</mat-option>
        <mat-option class="newFont" *ngFor="let block of blocks" [value]="block.value">{{block.viewValue}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="inputSelect">
      <mat-select class="newFont" placeholder="Panchayat" [(ngModel)]="selectedPanchayat" (selectionChange)="loadRecords('Village')" [disabled]="!selectedCountry || !selectedState || !selectedDistrict || !selectedBlock">
        <mat-option class="newFont">None</mat-option>
        <mat-option class="newFont" *ngFor="let panchayat of panchayats" [value]="panchayat.value">{{panchayat.viewValue}}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="inputSelect">
      <mat-select class="newFont" placeholder="Village" [(ngModel)]="selectedVillage" (selectionChange)="showWeatherData()" [disabled]="!selectedCountry || !selectedState || !selectedDistrict || !selectedBlock || !selectedPanchayat">
        <mat-option class="newFont">None</mat-option>
        <mat-option class="newFont" *ngFor="let village of villages" [value]="village.id">{{village.viewValue}}</mat-option>
      </mat-select>
    </mat-form-field>
  </mat-card>

  <div class="header" style="margin-bottom: 12px" *ngIf="selectedVillage && todayWeather">
    <mat-card class="header-top" style="font-family: 'Montserrat', sans-serif !important;">
      <div style="float:left;">
        <p *ngIf="todayWeather.weatherDate" style="text-align: left;color: #8c8b8b; margin-bottom: 4px;">{{todayWeather.weatherDate | date:'EEEE'}}, {{todayWeather.weatherDate | date:'MMMM dd'}}</p>
        <h2 *ngIf="todayWeather.status">{{todayWeather.status}}</h2>
      </div>
      <div *ngIf="todayWeather.condition" style="float:right;">
        <img style="max-width: 100px; margin-top: -20px;" src="{{todayWeather.conditionImageUrl}}" alt="{{todayWeather.condition}}"
        />
        <br/>
        <ul>
          <li *ngIf="todayWeather.condition">
            <p class="cen">{{todayWeather.condition}}</p>
          </li>
          <li *ngIf="todayWeather.rainfall">
            <p>
              <img class="whe" style="max-width: 100%;" src="assets/img/rainfall.svg" alt="Rainfall" /> {{todayWeather.rainfall}} mm
            </p>
          </li>
        </ul>
      </div>
      <div class="clear"> </div>
    </mat-card>
    <mat-card class="header-bottom" style="font-family: 'Montserrat', sans-serif !important; padding: 0;">
      <mat-card *ngFor="let weather of forecastWeather" class="header-bottom1 {{weather.position%2==0? 'header-bottom2' : ''}}">
        <div class="header-head">
          <div *ngIf="weather.weatherDate" class="bottom-head">
            <p>{{weather.weatherDate | date:'MMMM dd'}}</p>
            <p>{{weather.weatherDate | date:'EEEE'}}</p>
          </div>
          <img *ngIf="weather.condition" src="{{weather.conditionImageUrl}}" alt="{{weather.condition}}" />
          <h4 *ngIf="weather.condition" style="margin-top: -8px;">{{weather.condition}}</h4>
          <p *ngIf="weather.rainfall" style="font-weight: 1000; margin-top: 16px;">
            <img class="whe" style="max-width: 100%; margin: 0 auto;" src="assets/img/rainfall.svg" alt="Rainfall" /> {{weather.rainfall}} mm
          </p>
          <p *ngIf="weather.status" style="margin-top: 12px;">{{weather.status}}</p>
        </div>
      </mat-card>
      <div class="clear"> </div>
    </mat-card>
  </div>
</div>
